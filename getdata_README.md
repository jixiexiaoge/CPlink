# Xiaoge 数据接收和 Web 显示工具

## 功能说明

这是一个用于接收和显示 Xiaoge 数据的 Web 工具，可以：
- 连接到运行 `comma3_simulator.py` 或 `xiaoge_data.py` 的服务器（TCP 端口 7711）
- 实时接收和解析 JSON 数据
- 通过 Web 页面实时显示数据，数据更新平滑无闪烁

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

1. **启动服务器**：
   ```bash
   python getdata.py
   ```

2. **打开浏览器**：
   访问 `http://localhost:5000`

3. **连接数据源**：
   - 在页面顶部的输入框中输入目标 IP 地址（例如：`192.168.1.100`）
   - 点击"连接"按钮
   - 等待连接成功（状态指示器变为绿色）

4. **查看数据**：
   - 数据会自动实时更新显示
   - 包含三个部分：
     - **车辆状态 (carState)**: 车速、转向角度、盲区等
     - **模型数据 (modelV2)**: 前车、侧方车辆、车道线等
     - **系统状态 (systemState)**: 系统启用状态等

## 特性

### 防闪烁优化
- 使用平滑数值过渡动画
- 只更新变化的数据字段
- 变化的数据会有高亮提示
- 使用 WebSocket 实现实时双向通信

### 数据统计
- 数据包总数
- 总数据量（KB/MB）
- 最后更新时间
- 错误计数

### 连接管理
- 自动重连机制
- 心跳包支持
- 连接状态实时显示

## 技术实现

- **后端**: Flask + Flask-SocketIO
- **前端**: 原生 JavaScript + WebSocket
- **数据格式**: TCP 协议（4字节长度头 + JSON 数据）
- **更新频率**: 20Hz（每 50ms 一次）

## 注意事项

1. 确保目标服务器正在运行并监听端口 7711
2. 确保防火墙允许 TCP 连接
3. 如果连接失败，检查 IP 地址和网络连接
4. 数据会自动缓存最近 100 条记录

## 故障排除

- **连接失败**: 检查目标 IP 是否正确，服务器是否运行
- **无数据显示**: 检查服务器是否正在发送数据
- **页面无法访问**: 检查端口 5000 是否被占用

